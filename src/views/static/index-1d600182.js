var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,s=(e,s)=>{for(var l in s||(s={}))t.call(s,l)&&r(e,l,s[l]);if(a)for(var l of a(s))o.call(s,l)&&r(e,l,s[l]);return e};import{h as l}from"./index-01044443.js";import{E as n,l as p,p as i}from"./index-ff87e842.js";import{r as c}from"./service-f992a9ed.js";import{g as u,w as d,Q as m,_ as f,r as v,o as h,a as y,b,k as g,l as w,x,F as C,i as E,I as S,A as O,n as z,y as j,M as D,N as T}from"./index-f4eb0487.js";function k(e){return c({url:"/adm/page/echart/by/uuid",method:"post",data:e})}function P(e){return c({url:"/adm/page/echart/geo/distribution",method:"post",data:e})}function _(e){return c({url:"/adm/page/list",method:"post",data:e})}const A={class:"flex"};const $=f({props:{params:{type:Object,defualt:{happenDate:[],simpleUrl:""}}},components:{Echarts:n},setup(e){const a=u({pageErrorChartData:[],pvTotal:0,uvTotal:0});d((()=>e.params),(e=>{Object.keys(e).length&&m((()=>t(e)))}),{deep:!0});const t=e=>{return t=this,o=null,r=function*(){let t=yield function(e){return c({url:"/adm/page/hours/list",method:"post",data:e})}(e);const{model:o}=t;if(!t.success)return;let{axisData:r=[],seriesData:n=[],pvTotal:p=0,uvTotal:i=0}=o;n=n.map(((e,a)=>s({},s({name:{0:"pv",1:"uv"}[a],type:"bar",barGap:0,emphasis:{focus:"series"}},e))));const u={xAxis:{type:"category",data:r,axisLabel:{color:"#95979e",align:"center",formatter:e=>{const a=l(e).format("MM-DD HH:mm").split(" ");return`${a[0]}\n${a[1]}`}}},yAxis:{type:"value"},dataZoom:[{type:"inside"}],seriesColorReset:!0,series:[...n]};a.pageErrorChartData=u,a.pvTotal=p,a.uvTotal=i},new Promise(((e,a)=>{var s=e=>{try{n(r.next(e))}catch(t){a(t)}},l=e=>{try{n(r.throw(e))}catch(t){a(t)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(s,l);n((r=r.apply(t,o)).next())}));var t,o,r};return{data:a}}},[["render",function(e,a,t,o,r,s){const l=v("el-statistic"),n=v("Echarts");return h(),y(C,null,[b("div",A,[g(l,{value:o.data.pvTotal,style:{"margin-right":"20px"}},{title:w((()=>[x("总PV")])),_:1},8,["value"]),g(l,{value:o.data.uvTotal},{title:w((()=>[x("总uv")])),_:1},8,["value"])]),g(n,{options:o.data.pageErrorChartData},null,8,["options"])],64)}]]),B={props:{ipCregion:{type:Array,default:[]},zoom:{type:[Number,String],default:1.7},top:{type:String,default:"30%"}},components:{Echarts:n},setup(e){let a=E([]),t=E([]),o=E(!1);const r={geo:{map:"china",zoom:e.zoom,top:e.top,label:{rotate:60,normal:{show:!0,textStyle:{color:"#000"}}},tooltip:{formatter(e){const a=t.value.find((a=>a.name==e.name))||{};return`地区：${e.name}</br>数值：${a.cvalue||""}`}},itemStyle:{normal:{borderColor:"rgba(41, 193, 194, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(41, 193, 194, 0)"},{offset:1,color:"rgba(41, 193, 194, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"rgba(41, 193, 194, .5)",borderWidth:0}}},series:[{type:"scatter",coordinateSystem:"geo",symbol:"pin",legendHoverLink:!0,symbolSize:[40,40],label:{show:!0,formatter:e=>e.data.cvalue,color:"#fff"},itemStyle:{normal:{color:"rgba(255,0,0,.9)",shadowBlur:2,shadowColor:"D8BC37"}},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,zlevel:2,data:[]},{name:"地理涟漪",type:"effectScatter",coordinateSystem:"geo",data:[],symbolSize:3,showEffectOn:"render",rippleEffect:{brushType:"stroke",color:"#f13434",period:10,scale:10},hoverAnimation:!0,itemStyle:{color:"#f13434",shadowBlur:2,shadowColor:"#333"},zlevel:1}]};return d((()=>e.ipCregion),(()=>{(()=>{const o=p.cloneDeep(r);e.ipCregion.forEach((e=>{let{name:a="",value:o=""}=e;const r=a.split(" ");a=r[1]||"";const s=t.value.findIndex((e=>e.name===a));s>-1?t.value[s].cvalue=t.value[s].cvalue+o:t.value.push({name:a,oName:`${r[0]} ${r[1]}`,cvalue:o})}));const s=i.features||[];t.value.forEach(((e,a)=>{const o=s.find((a=>(a.properties.name||"").indexOf(e.name)>-1));if(o){const{center:e,name:r}=o.properties;t.value[a].value=e,t.value[a].name=r}})),o.series=o.series.map((e=>(e.data=t.value,e))),m((()=>{o.geo.zoom=e.zoom,o.geo.top=e.top,a.value=o}))})()}),{deep:!0}),{mapEchartsOption:a,popuSwitch:o,collectProvinces:t}}},H={class:"flex map-custom-content"},I={class:"map-custom-operate"},M=(e=>(D("data-v-52a113a0"),e=e(),T(),e))((()=>b("dl",{class:"flex title"},[b("dd",null,"排名"),b("dd",null,"城市"),b("dd",null,"用户数")],-1)));const N=f(B,[["render",function(e,a,t,o,r,s){const l=v("Echarts"),n=v("Histogram"),p=v("el-icon"),i=v("CircleClose"),c=v("el-scrollbar");return h(),y("div",H,[g(l,{options:o.mapEchartsOption,map:!0,size:600},null,8,["options"]),b("div",I,[g(p,{size:"24",color:"rgba(41, 193, 194, 1)",onClick:a[0]||(a[0]=S((e=>o.popuSwitch=!0),["stop"]))},{default:w((()=>[g(n)])),_:1})]),b("div",{class:z(["map-custom-data-popu flex flex-column",{"open-switch":o.popuSwitch}])},[g(p,{class:"close-popu",size:"24",onClick:a[1]||(a[1]=S((e=>o.popuSwitch=!1),["stop"]))},{default:w((()=>[g(i)])),_:1}),M,g(c,null,{default:w((()=>[(h(!0),y(C,null,O(o.collectProvinces,((e,a)=>(h(),y("dl",{class:"flex",key:a},[b("dd",null,j(a+1),1),b("dd",null,j(e.name),1),b("dd",null,j(e.cvalue),1)])))),128))])),_:1})],2)])}],["__scopeId","data-v-52a113a0"]]);export{N as M,k as a,P as b,_ as c,$ as p};
