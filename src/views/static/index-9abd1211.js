var t=Object.defineProperty,a=Object.defineProperties,e=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,e,l)=>e in a?t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,s=(t,a)=>{for(var e in a||(a={}))o.call(a,e)&&i(t,e,a[e]);if(l)for(var e of l(a))n.call(a,e)&&i(t,e,a[e]);return t},r=(t,a,e)=>new Promise(((l,o)=>{var n=t=>{try{s(e.next(t))}catch(a){o(a)}},i=t=>{try{s(e.throw(t))}catch(a){o(a)}},s=t=>t.done?l(t.value):Promise.resolve(t.value).then(n,i);s((e=e.apply(t,a)).next())}));import{c}from"./index-01044443.js";import{r as d}from"./service-f992a9ed.js";import{p,M as u,a as y,b as h}from"./index-1d600182.js";import{_ as m,r as f,o as D,a as v,k as b,l as g,x as _,y as j,b as x,d as C,e as K,M as T,N as w,c as P,w as O,F as E,g as $,R as M}from"./index-f4eb0487.js";import{E as N,l as k}from"./index-ff87e842.js";const I={props:{title:{type:String,default:()=>""},optionData:{type:Object,default:()=>({})},objKey:{type:String,default:()=>""}},setup:()=>({riseTrendCompout:(t,a,e)=>{let l=0;return l=e?(t-a)/t:(a-t)/a,`${(100*(l||0)).toFixed(0)} %`}})},U={class:"footer-item"},V=(t=>(T("data-v-7212cecc"),t=t(),w(),t))((()=>x("span",null,"较昨日",-1))),z={class:"green"};const F={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0,formatter:t=>{let{name:a,value:e,seriesName:l,color:o}=t[0],n=a;return a.includes(".com")&&(a=a.split(".com")[1],a=a.split("?"),n=`${a[0]}</br>${a[1]?a[1].slice(0,20)+"...":""}`),`${n}</br><span style="display:flex; align-items: center;">\n\t\t\t\t<i style="display:block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:${o}"></i>${l}:\n\t\t\t\t <i style="padding-left: 30px;">${e}</i>\n\t\t\t</span>`}},xAxis:{type:"value",splitNumber:5,position:"top"},yAxis:{type:"category",data:[],axisLabel:{color:"#95979e",interval:0,formatter:t=>`${t.slice(0,20)}${t.length>20?"...":""}`}},series:[{name:"数量",type:"bar",label:{show:!0,position:"right",valueAnimation:!0},emphasis:{focus:"series"},data:[]}]};const H={components:{dataCardItem:m(I,[["render",function(t,a,e,l,o,n){const i=f("el-statistic"),s=f("CaretTop"),r=f("CaretBottom"),c=f("el-icon");return D(),v("div",null,[b(i,{value:e.optionData.analyseData.todayData[e.objKey]},{title:g((()=>[_(j(e.title),1)])),_:1},8,["value"]),x("div",U,[V,x("span",z,[_(j(l.riseTrendCompout(e.optionData.analyseData.todayData[e.objKey],e.optionData.analyseData.yesterdayData[e.objKey],e.optionData.analyseData.todayData[e.objKey]>e.optionData.analyseData.yesterdayData[e.objKey]))+" ",1),b(c,{size:"14"},{default:g((()=>[e.optionData.analyseData.todayData[e.objKey]>e.optionData.analyseData.yesterdayData[e.objKey]?(D(),C(s,{key:0})):K("",!0),e.optionData.analyseData.todayData[e.objKey]<e.optionData.analyseData.yesterdayData[e.objKey]?(D(),C(r,{key:1})):K("",!0)])),_:1})])])])}],["__scopeId","data-v-7212cecc"]]),pageHoursEchart:p,colItem:m({props:{title:{type:String,default:""},tip:{type:String,default:""},chart:{type:Object,default:{}},optionData:{type:Object,default:{}},chartKey:{type:String,default:""}},components:{Echarts:N},setup(t){const{chart:a}=t,e=P((()=>(t,e=a.topEchartModel)=>{const l=k.cloneDeep(F),o=e[t],n=(null==o?void 0:o.axisData)||[],i=(null==o?void 0:o.seriesData)||[],s=i.length,r=s-a.showNum;return l.yAxis.data=n.slice(r,s),l.series[0].data=i.slice(r,s),l}));return O(a,(()=>{})),{chartData:e}}},[["render",function(t,a,e,l,o,n){const i=f("WarningFilled"),s=f("el-icon"),r=f("el-tooltip"),c=f("Echarts");return D(),v(E,null,[x("dl",null,[x("dt",null,[_(j(e.title)+" "+j(e.chart.showNum)+" ",1),b(r,{effect:"dark",content:e.tip,placement:"right"},{default:g((()=>[b(s,{size:"20"},{default:g((()=>[b(i)])),_:1})])),_:1},8,["content"])]),x("dd",null,j(e.optionData.analyseTime),1)]),b(c,{options:l.chartData(e.chartKey,e.chart.topEchartModel),size:e.chart.echartHeight},null,8,["options","size"])],64)}],["__scopeId","data-v-699eebab"]]),MapEcharts:u},setup(){let t=$({analyseTime:"",analyseData:{todayData:{pvCount:0,uvCount:0,newUvCount:0,ipCounct:0,jumpCount:0,visitFrequency:0},yesterdayData:{pvCount:0,uvCount:0,newUvCount:0,ipCounct:0,jumpCount:0,visitFrequency:0}}});const l=()=>r(this,null,(function*(){let a={analyseTime:t.analyseTime},e=yield function(t){return d({url:"/adm/analyse/core",method:"post",data:t})}(a);if(!e.success)return!1;t.analyseData=e.model})),o=()=>{l(),u(),m()},n=P((()=>({startTime:`${t.analyseTime} 00:00:00`,endTime:`${t.analyseTime} 23:59:59`}))),i=P((()=>s({},n.value)));let p=$({topEchartModel:{},ipcregion:[],showNum:10,echartHeight:200});const u=()=>r(this,null,(function*(){const t=(l=s({},n.value),a(l,e({limit:30})));var l;const o=yield y(t);if(!o.success)return!1;p.topEchartModel=o.model})),m=()=>r(this,null,(function*(){const t=s({},n.value);let a=yield h(t);if(!a.success)return!1;p.ipcregion=a.model}));return M((()=>{t.analyseTime=c(),o()})),{data:t,disabledDate:t=>t.getTime()>Date.now(),initQuery:o,hourPvUvParam:i,chart:p,handleTopNumChange:t=>{p.echartHeight={10:300,20:400,30:500}[t]}}}},S=t=>(T("data-v-8451148f"),t=t(),w(),t),A={class:"app-container center"},Y={class:"home-title flex"},q=S((()=>x("dt",{class:"flex-1"},"核心数据",-1))),Q={class:"top-title"},W=S((()=>x("span",{style:{color:"var(--e-color-success-light-3)"}},"(H-1数据)",-1))),B=S((()=>x("div",{class:"top-title"},"实时数据",-1))),L={class:"home-title flex"},R=S((()=>x("dt",null,"综合数据",-1))),G={class:"flex-1"},J={class:"synthetic-data flex"},X={class:"synthetic-data flex"},Z={class:"e-col"},tt={class:"e-col"},at={class:"e-col"},et={class:"e-col"},lt={class:"e-col"},ot={class:"e-col"},nt={class:"top-title"};const it=m(H,[["render",function(t,a,e,l,o,n){const i=f("el-date-picker"),s=f("WarningFilled"),r=f("el-icon"),c=f("el-tooltip"),d=f("dataCardItem"),p=f("el-col"),u=f("el-row"),y=f("el-card"),h=f("pageHoursEchart"),m=f("el-radio-button"),j=f("el-radio-group"),C=f("colItem"),K=f("MapEcharts");return D(),v("div",A,[x("dl",Y,[q,x("dd",null,[b(i,{modelValue:l.data.analyseTime,"onUpdate:modelValue":a[0]||(a[0]=t=>l.data.analyseTime=t),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择查询日期",clearable:!1,"disabled-date":l.disabledDate,onChange:l.initQuery},null,8,["modelValue","disabled-date","onChange"])])]),b(y,{class:"box-card"},{default:g((()=>[x("div",Q,[_(" 流量数据 "),W,b(c,{effect:"dark",content:"定时数据，每小时59分钟59秒统计",placement:"right"},{default:g((()=>[b(r,{size:"20"},{default:g((()=>[b(s)])),_:1})])),_:1})]),b(u,{gutter:24},{default:g((()=>[b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"浏览量(PV)",objKey:"pvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"访客数(UV)",objKey:"uvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"新访客",objKey:"newUvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"IP数",objKey:"ipCounct"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"频次(人均)",objKey:"visitFrequency"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:l.data,title:"跳出率",objKey:"jumpCount"},null,8,["optionData"])])),_:1})])),_:1})])),_:1}),b(y,{class:"box-card mt20"},{default:g((()=>[B,b(h,{params:l.hourPvUvParam},null,8,["params"])])),_:1}),x("dl",L,[R,x("dd",G,[b(j,{modelValue:l.chart.showNum,"onUpdate:modelValue":a[1]||(a[1]=t=>l.chart.showNum=t),onChange:l.handleTopNumChange,size:"small"},{default:g((()=>[b(m,{label:10},{default:g((()=>[_("10")])),_:1}),b(m,{label:20},{default:g((()=>[_("20")])),_:1}),b(m,{label:30},{default:g((()=>[_("30")])),_:1})])),_:1},8,["modelValue","onChange"])])]),x("section",J,[x("div",X,[x("div",Z,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"simpleUrl",title:"页面访问量TOP",tip:"统计网站的访问数量"},null,8,["chart","optionData"])])),_:1})]),x("div",tt,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"cregion",title:"城市名称访问用户量TOP",tip:"在不同城市访问网站的用户量分布情况。ps: 城市是根据ip地址查询出来的，并不是每个ip都能查询出来，查询出来的结果也未必准确，只作为趋势参考"},null,8,["chart","optionData"])])),_:1})]),x("div",at,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"device",title:"浏览设备访问用户量TOP",tip:"数值代表使用的浏览设备的数量"},null,8,["chart","optionData"])])),_:1})]),x("div",et,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"os",title:"系统版本访问用户量TOP",tip:"不同设备星号的用户量分布情况"},null,8,["chart","optionData"])])),_:1})]),x("div",lt,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"browser",title:"浏览器版本访问用户量TOP",tip:"数值代表使用的浏览器版本的数量"},null,8,["chart","optionData"])])),_:1})]),x("div",ot,[b(y,null,{default:g((()=>[b(C,{chart:l.chart,optionData:l.data,chartKey:"screen",title:"设备分辨率访问用户量TOP",tip:"数值代表设备的物理分辨率"},null,8,["chart","optionData"])])),_:1})])])]),b(y,{class:"box-card mt20"},{default:g((()=>[x("div",nt,[_(" 地理分布 "),b(c,{effect:"dark",content:"城市是根据ip地址查询出来的，并不是每个ip都能查询出结果，查询出来的结果也未必准确，只作为趋势参考。",placement:"right"},{default:g((()=>[b(r,{size:"20"},{default:g((()=>[b(s)])),_:1})])),_:1})]),b(K,{ipCregion:l.chart.ipcregion},null,8,["ipCregion"])])),_:1})])}],["__scopeId","data-v-8451148f"]]);export{it as default};
