import{t as e,a}from"./index-ac4bdb64.js";import{r as t}from"./service-f6b7e411.js";import{u as l}from"./usePagination-9a0ee094.js";import{g as n,R as r,_ as s,r as o,o as i,a as u,k as p,l as d,b as c,F as g,A as m,y as f,z as h,d as _,e as y}from"./index-f87793d4.js";const D={class:"app-container"},C={class:"custom-main-contents visit-left-contents visit-right-contents"},v={class:"flex-1 flex flex-column"},T={class:"pager-wrapper mt20"},b={class:"visit-right-contents"},S={class:"basic-header"};const R=s({setup(){let s=n({searchData:{uuId:"",categorys:["PAGE_CHANGE","USER_CLICK","HTTP_LOG","JS_ERROR"],data:e({format:["00:00:00","23:59:59"]})},categoryOptions:[{value:"PAGE_CHANGE",label:"用户浏览"},{value:"USER_CLICK",label:"用户点击"},{value:"HTTP_LOG",label:"用户请求"},{value:"JS_ERROR",label:"JS错误"}],pageDetail:{},userList:[]});const{paginationData:o,handleCurrentChange:i,handleSizeChange:u}=l((()=>{p()})),p=async()=>{if(!s.searchData.uuId||!s.searchData.categorys)return;let e={uuId:s.searchData.uuId,categorys:s.searchData.categorys,startTime:s.searchData.data[0],endTime:s.searchData.data[1],page:o.currentPage,pageSize:o.pageSize},a=await function(e){return t({url:"/adm/get/user/behavior",method:"post",data:e})}(e);a.success?(s.pageDetail=a.model.pageDetail||{},s.userList=a.model.userList||[],o.total=a.model.count):s.pageDetail={}},d=async()=>{o.currentPage=1,o.pageSize=10,p()};return r((()=>{d()})),{data:s,init:d,resetSearch:()=>{},paginationData:o,handleCurrentChange:i,handleSizeChange:u,timeformatter:a}}},[["render",function(e,a,t,l,n,r){const s=o("el-input"),R=o("el-form-item"),x=o("el-option"),E=o("el-select"),I=o("el-date-picker"),P=o("el-button"),k=o("el-form"),z=o("el-card"),L=o("el-timeline-item"),G=o("el-timeline"),A=o("el-scrollbar"),U=o("el-pagination"),H=o("el-col"),O=o("el-row");return i(),u("div",D,[p(z,{class:"search-wrapper"},{default:d((()=>[p(k,{ref:"searchFormRef",inline:!0,model:l.data.searchData},{default:d((()=>[p(R,{prop:"uuId",label:"用户Id"},{default:d((()=>[p(s,{modelValue:l.data.searchData.uuId,"onUpdate:modelValue":a[0]||(a[0]=e=>l.data.searchData.uuId=e),placeholder:"请输入用户ID"},null,8,["modelValue"])])),_:1}),p(R,{prop:"categorys",label:"事件类型"},{default:d((()=>[p(E,{modelValue:l.data.searchData.categorys,"onUpdate:modelValue":a[1]||(a[1]=e=>l.data.searchData.categorys=e),multiple:"",placeholder:"请选择事件类型",style:{width:"400px"}},{default:d((()=>[(i(!0),u(g,null,m(l.data.categoryOptions,(e=>(i(),_(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(R,{prop:"phone",label:"日期"},{default:d((()=>[p(I,{modelValue:l.data.searchData.data,"onUpdate:modelValue":a[2]||(a[2]=e=>l.data.searchData.data=e),type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])])),_:1}),p(R,null,{default:d((()=>[p(P,{type:"primary",onClick:l.init},{default:d((()=>[f("查询")])),_:1},8,["onClick"]),p(P,{onClick:l.resetSearch},{default:d((()=>[f("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),c("section",C,[p(z,{class:"flex flex-1 flex-column visit-left-list"},{default:d((()=>[c("div",v,[p(A,{"max-height":"550px",style:{flex:"1"}},{default:d((()=>[p(G,null,{default:d((()=>[(i(!0),u(g,null,m(l.data.userList,((e,a)=>(i(),_(L,{icon:"USER_CLICK"==e.category?"Pointer":"HTTP_LOG"==e.category?"Position":"PAGE_CHANGE"==e.category?"Files":"JS_ERROR"==e.category?"CircleClose":"",center:"",timestamp:e.happenTime,placement:"top",key:a},{default:d((()=>[p(z,null,{default:d((()=>["USER_CLICK"==e.category?(i(),u(g,{key:0},[c("p",null,h(e.subType),1),c("p",null,"pageUrl: "+h(e.pageUrl),1),c("p",null,"tagName: "+h(e.tagName),1),c("p",null,"innerHTML: "+h(e.innerHTML),1)],64)):y("",!0),"HTTP_LOG"==e.category?(i(),u(g,{key:1},[c("p",null,h(e.subType)+"请求方式: "+h(e.method)+" 请求方式:"+h(e.type)+" 接口状态: "+h(e.status)+" 耗时:"+h(l.timeformatter(e.duration)),1),c("p",null,"pageUrl: "+h(e.pageUrl),1),c("p",null,"pathName: "+h(e.pathName),1),c("p",null,"requestText: "+h(e.requestText),1),c("p",null,"responseText: "+h(e.responseText),1)],64)):y("",!0),"PAGE_CHANGE"==e.category?(i(),u(g,{key:2},[c("p",null,h(e.subType)+" 停留:"+h(l.timeformatter(e.duration)),1),c("p",null,"referrer: "+h(e.referrer),1),c("p",null,"from: "+h(e.from),1),c("p",null,"to: "+h(e.to),1)],64)):y("",!0),"JS_ERROR"==e.category?(i(),u(g,{key:3},[c("p",null,h(e.subType),1),c("p",null,h(e.errorMsg),1)],64)):y("",!0)])),_:2},1024)])),_:2},1032,["icon","timestamp"])))),128))])),_:1})])),_:1}),c("div",T,[p(U,{background:"",layout:l.paginationData.layout,"page-sizes":l.paginationData.pageSizes,total:l.paginationData.total,"page-size":l.paginationData.pageSize,currentPage:l.paginationData.currentPage,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])])),_:1}),c("div",b,[c("div",S,[p(O,null,{default:d((()=>[p(H,{span:12},{default:d((()=>[f("cip： "+h(l.data.pageDetail.ip),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("cregion： "+h(l.data.pageDetail.country),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("deviceType： "+h(l.data.pageDetail.deviceType),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("os： "+h(l.data.pageDetail.os),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("browserInfo： "+h(l.data.pageDetail.browserInfo),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("device： "+h(l.data.pageDetail.device),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("deviceModel： "+h(l.data.pageDetail.deviceModel),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("language： "+h(l.data.pageDetail.language),1)])),_:1}),p(H,{span:12},{default:d((()=>[f("netWork： "+h(l.data.pageDetail.netWork),1)])),_:1}),p(H,{span:12}),p(H,{span:12},{default:d((()=>[f("userAgent： "+h(l.data.pageDetail.userAgent),1)])),_:1})])),_:1})])])])])}],["__scopeId","data-v-1725fca3"]]);export{R as default};
