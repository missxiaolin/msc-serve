var e=(e,t,o)=>new Promise(((n,r)=>{var a=e=>{try{i(o.next(e))}catch(t){r(t)}},l=e=>{try{i(o.throw(e))}catch(t){r(t)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,l);i((o=o.apply(e,t)).next())}));import{u as t,p as o,a as n}from"./general-b6222533.js";import{u as r}from"./usePagination-486b724a.js";import{ai as a,t as l,g as i,i as u,c,R as s,K as d,_ as p,r as f,o as m,a as y,b as h,k as b,l as g,x as v,y as w,F as x,A as S,d as C,M as _,N as E}from"./index-f4eb0487.js";import"./service-f992a9ed.js";var T={exports:{}};const k=l(T.exports=function(){return function(){var e={686:function(e,t,o){o.d(t,{default:function(){return S}});var n=o(279),r=o.n(n),a=o(370),l=o.n(a),i=o(817),u=o.n(i);function c(e){try{return document.execCommand(e)}catch(t){return!1}}var s=function(e){var t=u()(e);return c("cut"),t},d=function(e,t){var o=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=e,o}(e);t.container.appendChild(o);var n=u()(o);return c("copy"),o.remove(),n},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},o="";return"string"==typeof e?o=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?o=d(e.value,t):(o=u()(e),c("copy")),o};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,o=void 0===t?"copy":t,n=e.container,r=e.target,a=e.text;if("copy"!==o&&"cut"!==o)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==f(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===o&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===o&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return a?p(a,{container:n}):r?"cut"===o?s(r):p(r,{container:n}):void 0};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n,r,a=v(e);if(t){var l=v(this).constructor;o=Reflect.construct(a,arguments,l)}else o=a.apply(this,arguments);return n=this,!(r=o)||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):r}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){var o="data-clipboard-".concat(e);if(t.hasAttribute(o))return t.getAttribute(o)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,o,n,r=g(a);function a(e,t){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=r.call(this)).resolveOptions(t),o.listenClick(e),o}return t=a,o=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=l()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,o=this.action(t)||"copy",n=m({action:o,container:this.container,target:this.target(t),text:this.text(t)});this.emit(n?"success":"error",{action:o,text:n,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return w("action",e)}},{key:"defaultTarget",value:function(e){var t=w("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return w("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],n=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return s(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return t.forEach((function(e){o=o&&!!document.queryCommandSupported(e)})),o}}],o&&h(t.prototype,o),n&&h(t,n),a}(r()),S=x},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,o){var n=o(828);function r(e,t,o,n,r){var l=a.apply(this,arguments);return e.addEventListener(o,l,r),{destroy:function(){e.removeEventListener(o,l,r)}}}function a(e,t,o,r){return function(o){o.delegateTarget=n(o.target,t),o.delegateTarget&&r.call(e,o)}}e.exports=function(e,t,o,n,a){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof o?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,o,n,a)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var o=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,o){var n=o(879),r=o(438);e.exports=function(e,t,o){if(!e&&!t&&!o)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(o))throw new TypeError("Third argument must be a Function");if(n.node(e))return function(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}(e,t,o);if(n.nodeList(e))return function(e,t,o){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,o)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,o)}))}}}(e,t,o);if(n.string(e))return function(e,t,o){return r(document.body,e,t,o)}(e,t,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=e.hasAttribute("readonly");o||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),o||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var n=this;function r(){n.off(e,r),t.apply(o,arguments)}return r._=t,this.on(e,r,o)},emit:function(e){for(var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,r=o.length;n<r;n++)o[n].fn.apply(o[n].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),n=o[e],r=[];if(n&&t)for(var a=0,l=n.length;a<l;a++)n[a].fn!==t&&n[a].fn._!==t&&r.push(n[a]);return r.length?o[e]=r:delete o[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}return o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o(686)}().default}()),{toClipboard:j}=(e=>{const t=void 0===(null==e?void 0:e.appendToBody)||e.appendToBody;return{toClipboard:(e,o)=>new Promise(((n,r)=>{const a=document.createElement("button"),l=new k(a,{text:()=>e,action:()=>"copy",container:void 0!==o?o:document.body});l.on("success",(e=>{l.destroy(),n(e)})),l.on("error",(e=>{l.destroy(),r(e)})),t&&document.body.appendChild(a),a.click(),t&&document.body.removeChild(a)}))}})(),F=t(),A={setup(){let t=i({isShowPorjectPop:!1,tableData:[],watchList:[{label:"PV",value:"pageChange",disabled:!0},{label:"JS错误",value:"jsError"},{label:"Vue错误",value:"vueError"},{label:"异步错误",value:"promise"},{label:"资源错误",value:"resource"},{label:"Fetch请求",value:"fetch"},{label:"Xhr请求",value:"xhr"},{label:"性能监控",value:"performance"},{label:"点击行为监控",value:"click"},{label:"白屏监控",value:"whiteScreen"},{label:"错误录屏上报",value:"recordScreen"}],projectTypeOptions:[{value:1,label:"web"}]});const a=u(),l=i({id:0,name:"",desc:"",monitorAppId:"",projectType:1,delay:30,encryption:0,watch:["pageChange"],maxQueues:1,status:1}),p=i({monitorAppId:[{required:!0,message:"请输入应用ID",trigger:"blur"}],name:[{required:!0,message:"请输入应用名称",trigger:"blur"}],desc:[{required:!0,message:"请输入应用说明",trigger:"blur"}]}),f=c((()=>{const{monitorAppId:e="",encryption:t,maxQueues:o,delay:n,watch:r=[]}=l;let a={};r.forEach((e=>{a[e]=!0,r.includes(e)||(a[e]=!1)})),a=JSON.stringify(a);let i='<script>;(function(w,d,s){n=()=>{const e=o(),r=`https://www.xxxx.com`;new MonitorSdk({monitorAppId:`{monitorAppId}`,uuId:()=>MUtils.monitorCookie("{cookieUserField}"),watch:{monitorWatch},report:{url:`${r}/monitor/upload`,trackUrl:`${r}/tracker/upload`,encryption:{monitorEncryption},maxQueues:{monitorMaxQueues},reportType:{monitorReportType},delay: {monitorDelay}}}) /* 多环境适配放开这里 } */ };(()=>{const e=d.createElement("script");e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,n())}:e.onload=function(){n()},e.src=s,d.head.append(e)})()})(window,document,"https://static.enmonster.com/epm/cdn/monitorSdk.js");<\/script>';return i=i.replace(/\{monitorAppId\}/g,`${e}`),i=i.replace(/\{monitorWatch\}/g,`${a}`),i=i.replace(/\{monitorEncryption\}/g,`${t}`),i=i.replace(/\{monitorMaxQueues\}/g,`${o}`),i=i.replace(/\{monitorReportType\}/g,"1"),i=i.replace(/\{monitorDelay\}/g,""+1e3*n),i})),m=()=>{t.isShowPorjectPop=!1,l.id=0,l.name="",l.desc="",l.monitorAppId="",l.projectType=1,l.delay=30,l.encryption=0,l.watch=["pageChange"],l.maxQueues=1},{paginationData:y,handleCurrentChange:h,handleSizeChange:b}=r((()=>{g()})),g=()=>e(this,null,(function*(){let e={page:y.currentPage,pageSize:y.pageSize},o=yield n(e);o.success&&(y.total=o.model.count,t.tableData=o.model.list)}));return s((()=>{g()})),{data:t,paginationData:y,handleCurrentChange:h,handleSizeChange:b,handleClose:m,ruleFormRef:a,ruleForm:l,rules:p,submitForm:t=>e(this,null,(function*(){t&&(yield t.validate(((t,n)=>e(this,null,(function*(){if(t){let e=l,t=yield o(e);t.success?(d({message:"保存成功",type:"success"}),m(),g(),F.getValidProject()):d({message:t.errorMessage,type:"error"})}})))))})),resetForm:e=>{e&&e.resetFields()},probeCode:f,probeCodeCopy:()=>e(this,null,(function*(){try{yield j(f.value)}catch(e){console.error(e)}})),showHandleDetail:e=>{l.id=e.id,l.name=e.name,l.desc=e.desc,l.monitorAppId=e.monitorAppId,l.projectType=Number(e.projectType),l.delay=e.delay,l.encryption=e.encryption,l.watch=JSON.parse(e.watch),l.maxQueues=e.maxQueues,t.isShowPorjectPop=!0}}}},V={class:"app-container"},P={class:"flex"},I={class:"table-wrapper"},O={class:"pager-wrapper mt20"},D={class:"flex"},L={class:"copy-code-area"},R=(e=>(_("data-v-38222000"),e=e(),E(),e))((()=>h("h4",null,"复制探针",-1))),z={class:"code"};const M=p(A,[["render",function(e,t,o,n,r,a){const l=f("el-button"),i=f("el-table-column"),u=f("el-table"),c=f("el-pagination"),s=f("el-card"),d=f("el-input"),p=f("el-form-item"),_=f("el-option"),E=f("el-select"),T=f("el-input-number"),k=f("el-radio"),j=f("el-radio-group"),F=f("el-checkbox"),A=f("el-checkbox-group"),M=f("el-form"),U=f("CopyDocument"),N=f("el-icon"),Q=f("el-dialog");return m(),y("div",V,[h("div",P,[b(l,{type:"primary",onClick:t[0]||(t[0]=e=>n.data.isShowPorjectPop=!0)},{default:g((()=>[v("新增应用")])),_:1})]),b(s,{class:"mt20"},{default:g((()=>[h("div",I,[b(u,{border:"",data:n.data.tableData},{default:g((()=>[b(i,{prop:"name",label:"应用名称",align:"center"}),b(i,{prop:"desc",label:"应用说明",align:"center"}),b(i,{prop:"monitorAppId",label:"项目Id",align:"monitorAppId"}),b(i,{prop:"delay",label:"上报间隔",align:"center"}),b(i,{label:"是否加密",align:"center"},{default:g((({row:e})=>[v(w(0==e.encryption?"不加密":"加密"),1)])),_:1}),b(i,{label:"是否开启",align:"center"},{default:g((({row:e})=>[v(w(0==e.status?"禁用":"开启"),1)])),_:1}),b(i,{prop:"updateTime",label:"修改时间",align:"center"}),b(i,{label:"操作",align:"center"},{default:g((({row:e})=>[b(l,{type:"text",onClick:t=>n.showHandleDetail(e)},{default:g((()=>[v(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),h("div",O,[b(c,{background:"",layout:n.paginationData.layout,"page-sizes":n.paginationData.pageSizes,total:n.paginationData.total,"page-size":n.paginationData.pageSize,currentPage:n.paginationData.currentPage,onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1}),b(Q,{modelValue:n.data.isShowPorjectPop,"onUpdate:modelValue":t[12]||(t[12]=e=>n.data.isShowPorjectPop=e),title:"应用",width:"60%","before-close":n.handleClose},{default:g((()=>[h("div",D,[b(M,{ref:"ruleFormRef",model:n.ruleForm,rules:n.rules,"label-width":"120px",size:"default","status-icon":"",class:"pop-form"},{default:g((()=>[b(p,{label:"应用ID",prop:"monitorAppId"},{default:g((()=>[b(d,{modelValue:n.ruleForm.monitorAppId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.ruleForm.monitorAppId=e),disabled:!!n.ruleForm.id},null,8,["modelValue","disabled"])])),_:1}),b(p,{label:"应用类型",prop:"projectType"},{default:g((()=>[b(E,{modelValue:n.ruleForm.projectType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.ruleForm.projectType=e)},{default:g((()=>[(m(!0),y(x,null,S(n.data.projectTypeOptions,(e=>(m(),C(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(p,{label:"应用名称",prop:"name"},{default:g((()=>[b(d,{modelValue:n.ruleForm.name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),b(p,{label:"应用说明",prop:"desc"},{default:g((()=>[b(d,{modelValue:n.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>n.ruleForm.desc=e)},null,8,["modelValue"])])),_:1}),b(p,{label:"上报条数",prop:"maxQueues"},{default:g((()=>[b(T,{modelValue:n.ruleForm.maxQueues,"onUpdate:modelValue":t[5]||(t[5]=e=>n.ruleForm.maxQueues=e),min:1,max:20},null,8,["modelValue"])])),_:1}),b(p,{label:"应用间隔",prop:"delay"},{default:g((()=>[b(d,{modelValue:n.ruleForm.delay,"onUpdate:modelValue":t[6]||(t[6]=e=>n.ruleForm.delay=e)},{append:g((()=>[v("ms")])),_:1},8,["modelValue"])])),_:1}),b(p,{label:"是否加密",prop:"encryption"},{default:g((()=>[b(j,{modelValue:n.ruleForm.encryption,"onUpdate:modelValue":t[7]||(t[7]=e=>n.ruleForm.encryption=e),disabled:!0},{default:g((()=>[b(k,{label:1},{default:g((()=>[v("加密")])),_:1}),b(k,{label:0},{default:g((()=>[v("不加密")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(p,{label:"是否使用",prop:"encryption"},{default:g((()=>[b(j,{modelValue:n.ruleForm.status,"onUpdate:modelValue":t[8]||(t[8]=e=>n.ruleForm.status=e)},{default:g((()=>[b(k,{label:1},{default:g((()=>[v("使用")])),_:1}),b(k,{label:0},{default:g((()=>[v("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(p,{label:"监听配置",prop:"watch"},{default:g((()=>[b(A,{modelValue:n.ruleForm.watch,"onUpdate:modelValue":t[9]||(t[9]=e=>n.ruleForm.watch=e)},{default:g((()=>[(m(!0),y(x,null,S(n.data.watchList,((e,t)=>(m(),C(F,{label:e.value,key:t,disabled:e.disabled||!1},{default:g((()=>[v(w(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(p,null,{default:g((()=>[b(l,{type:"primary",onClick:t[10]||(t[10]=e=>n.submitForm(n.ruleFormRef))},{default:g((()=>[v(w(n.ruleForm.id&&0!=n.ruleForm.id?"修改":"添加"),1)])),_:1}),b(l,{onClick:t[11]||(t[11]=e=>n.resetForm(n.ruleFormRef))},{default:g((()=>[v("重置")])),_:1})])),_:1})])),_:1},8,["model","rules"]),h("div",L,[R,h("div",z,[b(N,{class:"copy-btn",size:"22",onClick:n.probeCodeCopy},{default:g((()=>[b(U)])),_:1},8,["onClick"]),v(" "+w(n.probeCode),1)])])])])),_:1},8,["modelValue","before-close"])])}],["__scopeId","data-v-38222000"]]);export{M as default};
