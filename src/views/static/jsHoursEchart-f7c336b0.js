import{E as e}from"./index-885fb35f.js";import{r as t}from"./service-4a0c217b.js";import{h as r}from"./index-e51ca18a.js";import{g as a,w as s,R as o,Q as l,_ as i,r as n,o as c,a as p,b as u,k as d,l as m,F as v,A as g,z as f,M as h,N as y}from"./index-1656c061.js";function L(e){return t({url:"/adm/js/list",method:"post",data:e})}function j(e){return t({url:"/adm/js/aggregate/error/by/errormsg",method:"post",data:e})}const b={props:{params:{type:Object,default:{}}},components:{Echarts:e},setup(e){const i=a({jsErrorChartData:[],effectUserList:[],cregionList:[],pageList:[],errorTypeList:[],jseErrorCount:0}),n=async e=>{const a={pageUrl:e.pageUrl||"",errorMsg:e.errorMsg||"",startTime:e.data[0],endTime:e.data[1],simpleUrl:e.simpleUrl||""};let s=await function(e){return t({url:"/adm/js/echart/hour",method:"post",data:e})}(a);if(!s.success)return;const{model:o}=s,{axisData:l=[],seriesData:n=[],userList:c=[],cregionList:p=[],pageList:u=[],errorTypeList:d=[],errorCount:m=0}=o,v={xAxis:{type:"category",data:l,axisLabel:{color:"#95979e",align:"center",formatter:e=>{const t=r(e).format("MM-DD HH:mm").split(" ");return`${t[0]}\n${t[1]}`}}},yAxis:{type:"value"},dataZoom:[{type:"inside"}],series:[{name:"数量",data:n,type:"line"}]};i.jsErrorChartData=v,i.jseErrorCount=m,i.effectUserList=c,i.cregionList=p,i.pageList=u,i.errorTypeList=d,i.jseErrorCount=m};return s((()=>e.params),(e=>{Object.keys(e).length&&l((()=>n(e)))}),{deep:!0}),o((()=>{n(e.params)})),{data:i}}},_=e=>(h("data-v-6b876040"),e=e(),y(),e),x={class:"flex js-error-tip"},E=_((()=>u("div",null,"错误类型",-1))),U={class:"popover-content"},C=_((()=>u("div",null,"影响人数",-1))),D={class:"popover-content"},T=_((()=>u("div",null,"影响城市",-1))),k={class:"popover-content"},w=_((()=>u("div",null,"影响页面",-1))),M={class:"popover-content"};const A=i(b,[["render",function(e,t,r,a,s,o){const l=n("el-statistic"),i=n("el-popover"),h=n("Echarts");return c(),p(v,null,[u("div",x,[d(l,{title:"错误数",value:a.data.jseErrorCount},null,8,["value"]),d(l,{value:a.data.errorTypeList.length,"value-style":"color: #29c1c2;"},{title:m((()=>[d(i,{placement:"bottom-start",width:200,trigger:"hover"},{reference:m((()=>[E])),default:m((()=>[u("div",U,[(c(!0),p(v,null,g(a.data.errorTypeList,((e,t)=>(c(),p("p",{key:t},f(e.type),1)))),128))])])),_:1})])),_:1},8,["value"]),d(l,{value:a.data.effectUserList.length,"value-style":"color: #29c1c2;"},{title:m((()=>[d(i,{placement:"bottom-start",width:200,trigger:"hover"},{reference:m((()=>[C])),default:m((()=>[u("div",D,[(c(!0),p(v,null,g(a.data.effectUserList,((e,t)=>(c(),p("p",{key:t},f(e.uuId),1)))),128))])])),_:1})])),_:1},8,["value"]),d(l,{value:a.data.cregionList.length,"value-style":"color: #29c1c2;"},{title:m((()=>[d(i,{placement:"bottom-start",width:200,trigger:"hover"},{reference:m((()=>[T])),default:m((()=>[u("div",k,[(c(!0),p(v,null,g(a.data.cregionList,((e,t)=>(c(),p("p",{key:t},f(e.province),1)))),128))])])),_:1})])),_:1},8,["value"]),d(l,{value:a.data.pageList.length,"value-style":"color: #29c1c2;"},{title:m((()=>[d(i,{placement:"bottom-start",width:200,trigger:"hover"},{reference:m((()=>[w])),default:m((()=>[u("div",M,[(c(!0),p(v,null,g(a.data.pageList,((e,t)=>(c(),p("p",{key:t},f(e.pageUrl),1)))),128))])])),_:1})])),_:1},8,["value"])]),d(h,{options:a.data.jsErrorChartData},null,8,["options"])],64)}],["__scopeId","data-v-6b876040"]]);export{A as J,j as a,L as j};
