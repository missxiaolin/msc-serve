import{E as t}from"./index-e17dbb2e.js";import{c as e,_ as o,r as a,o as s,a as n,b as i,k as r,l,F as p,y as d}from"./index-f7b62236.js";import{r as c}from"./service-390d662b.js";const u={class:"flex flex-row justify-between",style:{width:"100%"}};const h=o({components:{Echarts:t},props:{options:{type:Object,required:!0}},name:"perfEchart",setup:t=>({navigationEchart:e((()=>{var e;const o=(null==(e=t.options)?void 0:e.nt)||{};if(!o||!Object.keys(o).length)return{};const a=["pageLoad","domReady","resourceLoad","domParse","contentDownload","ttfb","ssl","initialConnection","dnsLookup"],s=[],n=[];a.forEach(((t,e)=>{const i=(o[t]||0).toFixed(2);n.push(`${i}ms`);const r={name:t,type:"bar",stack:"Total",label:{show:!0,position:"right"},data:[]};for(let o=0,s=a.length;o<s;o++)e==o?r.data.push(i):r.data.push("-");s.push(r)}));const{pageLoad:i=0,domReady:r=0,resourceLoad:l=0,domParse:p=0,contentDownload:d=0,ttfb:c=0,ssl:u=0,initialConnection:h=0,dnsLookup:m=0}=o;return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(let e=1,o=t.length;e<o;e++){let{name:o,value:a,seriesName:s,color:n}=t[e];if("-"!==a)return`${o}</br><span style="display:flex; align-items: center;">\n\t\t\t\t\t<i style="display:block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:${n}"></i>${s}:\n\t\t\t\t\t<i style="padding-left: 30px;">${a}</i>\n\t\t\t\t</span>`}}},xAxis:{type:"value",show:!1,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}}},yAxis:[{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:["页面完全加载","DOM完成加载","资源加载耗时","DOM解析耗时","内容传输耗时","请求响应耗时","SSL安全连接耗时","TCP连接耗时","DNS查询耗时"]},{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:n}],seriesColorReset:!1,series:[{name:"Placeholder",type:"bar",stack:"Total",silent:!0,itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:[`${i+r+l+p+d+c+u+h+m}`,`${r+l+p+d+c+u+h+m}`,`${l+p+d+c+u+h+m}`,`${p+d+c+u+h+m}`,`${d+c+u+h+m}`,`${c+u+h+m}`,`${u+h+m}`,`${h+m}`,`${m}`]},...s]}}))})},[["render",function(t,e,o,c,h,m){const f=a("el-statistic"),y=a("Echarts");return s(),n(p,null,[i("div",u,[r(f,{title:"白屏时间",value:o.options.fp.value||0},{suffix:l((()=>[d("ms")])),_:1},8,["value"]),r(f,{title:"DOM完成加载",value:o.options.nt&&o.options.nt.domReady?o.options.nt.domReady:0},{suffix:l((()=>[d("ms")])),_:1},8,["value"]),r(f,{title:"页面完全加载",value:o.options.nt&&o.options.nt.pageLoad?o.options.nt.pageLoad:0},{suffix:l((()=>[d("ms")])),_:1},8,["value"])]),r(y,{options:c.navigationEchart},null,8,["options"])],64)}]]);function m(t){return c({url:"/adm/performance/list",method:"post",data:t})}function f(t){return c({url:"/adm/performance/echart/by/url",method:"post",data:t})}export{h as P,f as a,m as p};
