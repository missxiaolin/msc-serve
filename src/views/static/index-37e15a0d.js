import{h as e}from"./index-733efa5e.js";import{E as a,l as t,p as o}from"./index-36d9c146.js";import{r as s}from"./service-d7e6e336.js";import{g as r,w as l,Q as n,_ as i,r as p,o as c,a as u,b as d,k as m,l as f,F as h,y as v,i as g,I as y,n as b,A as x,M as w,N as C,z as E}from"./index-79304586.js";function S(e){return s({url:"/adm/page/echart/by/uuid",method:"post",data:e})}function z(e){return s({url:"/adm/page/echart/geo/distribution",method:"post",data:e})}function D(e){return s({url:"/adm/page/list",method:"post",data:e})}const T={class:"flex"};const O=i({props:{params:{type:Object,defualt:{happenDate:[],simpleUrl:""}}},components:{Echarts:a},setup(a){const t=r({pageErrorChartData:[],pvTotal:0,uvTotal:0});l((()=>a.params),(e=>{Object.keys(e).length&&n((()=>o(e)))}),{deep:!0});const o=async a=>{let o=await function(e){return s({url:"/adm/page/hours/list",method:"post",data:e})}(a);const{model:r}=o;if(!o.success)return;let{axisData:l=[],seriesData:n=[],pvTotal:i=0,uvTotal:p=0}=r;n=n.map(((e,a)=>({...{name:{0:"pv",1:"uv"}[a],type:"bar",barGap:0,emphasis:{focus:"series"},...e}})));const c={xAxis:{type:"category",data:l,axisLabel:{color:"#95979e",align:"center",formatter:a=>{const t=e(a).format("MM-DD HH:mm").split(" ");return`${t[0]}\n${t[1]}`}}},yAxis:{type:"value"},dataZoom:[{type:"inside"}],seriesColorReset:!0,series:[...n]};t.pageErrorChartData=c,t.pvTotal=i,t.uvTotal=p};return{data:t}}},[["render",function(e,a,t,o,s,r){const l=p("el-statistic"),n=p("Echarts");return c(),u(h,null,[d("div",T,[m(l,{value:o.data.pvTotal,style:{"margin-right":"20px"}},{title:f((()=>[v("总PV")])),_:1},8,["value"]),m(l,{value:o.data.uvTotal},{title:f((()=>[v("总uv")])),_:1},8,["value"])]),m(n,{options:o.data.pageErrorChartData},null,8,["options"])],64)}]]),k={props:{ipCregion:{type:Array,default:[]},zoom:{type:[Number,String],default:1.7},top:{type:String,default:"30%"}},components:{Echarts:a},setup(e){let a=g([]),s=g([]),r=g(!1);const i={geo:{map:"china",zoom:e.zoom,top:e.top,label:{rotate:60,normal:{show:!0,textStyle:{color:"#000"}}},tooltip:{formatter(e){const a=s.value.find((a=>a.name==e.name))||{};return`地区：${e.name}</br>数值：${a.cvalue||"0"}`}},itemStyle:{normal:{borderColor:"rgba(41, 193, 194, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(41, 193, 194, 0)"},{offset:1,color:"rgba(41, 193, 194, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"rgba(41, 193, 194, .5)",borderWidth:0}}},series:[{type:"scatter",coordinateSystem:"geo",symbol:"pin",legendHoverLink:!0,symbolSize:[40,40],label:{show:!0,formatter:e=>e.data.cvalue,color:"#fff"},itemStyle:{normal:{color:"rgba(255,0,0,.9)",shadowBlur:2,shadowColor:"D8BC37"}},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,zlevel:2,data:[]},{name:"地理涟漪",type:"effectScatter",coordinateSystem:"geo",data:[],symbolSize:3,showEffectOn:"render",rippleEffect:{brushType:"stroke",color:"#f13434",period:10,scale:10},hoverAnimation:!0,itemStyle:{color:"#f13434",shadowBlur:2,shadowColor:"#333"},zlevel:1}]};return l((()=>e.ipCregion),(()=>{(()=>{const r=t.cloneDeep(i);e.ipCregion.forEach((e=>{let{name:a="",value:t=""}=e;const o=a.split(" ");a=o[1]||"";const r=s.value.findIndex((e=>e.name===a));r>-1?s.value[r].cvalue=s.value[r].cvalue+t:s.value.push({name:a,oName:`${o[0]} ${o[1]}`,cvalue:t})}));const l=o.features||[];s.value.forEach(((e,a)=>{const t=l.find((a=>(a.properties.name||"").indexOf(e.name)>-1));if(t){const{center:e,name:o}=t.properties;s.value[a].value=e,s.value[a].name=o}})),r.series=r.series.map((e=>(e.data=s.value,e))),n((()=>{r.geo.zoom=e.zoom,r.geo.top=e.top,a.value=r}))})()}),{deep:!0}),{mapEchartsOption:a,popuSwitch:r,collectProvinces:s}}},_={class:"flex map-custom-content"},j={class:"map-custom-operate"},A=(e=>(w("data-v-69c422ae"),e=e(),C(),e))((()=>d("dl",{class:"flex title"},[d("dd",null,"排名"),d("dd",null,"城市"),d("dd",null,"用户数")],-1)));const $=i(k,[["render",function(e,a,t,o,s,r){const l=p("Echarts"),n=p("Histogram"),i=p("el-icon"),v=p("CircleClose"),g=p("el-scrollbar");return c(),u("div",_,[m(l,{options:o.mapEchartsOption,map:!0,size:600},null,8,["options"]),d("div",j,[m(i,{size:"24",color:"rgba(41, 193, 194, 1)",onClick:a[0]||(a[0]=y((e=>o.popuSwitch=!0),["stop"]))},{default:f((()=>[m(n)])),_:1})]),d("div",{class:b(["map-custom-data-popu flex flex-column",{"open-switch":o.popuSwitch}])},[m(i,{class:"close-popu",size:"24",onClick:a[1]||(a[1]=y((e=>o.popuSwitch=!1),["stop"]))},{default:f((()=>[m(v)])),_:1}),A,m(g,null,{default:f((()=>[(c(!0),u(h,null,x(o.collectProvinces,((e,a)=>(c(),u("dl",{class:"flex",key:a},[d("dd",null,E(a+1),1),d("dd",null,E(e.name),1),d("dd",null,E(e.cvalue),1)])))),128))])),_:1})],2)])}],["__scopeId","data-v-69c422ae"]]);export{$ as M,S as a,z as b,D as c,O as p};
//# sourceMappingURL=index-37e15a0d.js.map
