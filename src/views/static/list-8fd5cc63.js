import{u as e,p as t,a as o}from"./general-dd3d50f0.js";import{u as n}from"./usePagination-cf476e98.js";import{ai as r,t as a,g as l,i,c as u,R as c,K as s,_ as d,r as p,o as f,a as m,b as y,k as b,l as h,y as g,z as v,F as w,A as S,d as x,M as C,N as _}from"./index-1656c061.js";import"./service-4a0c217b.js";var E={exports:{}};const T=a(E.exports=function(){return function(){var e={686:function(e,t,o){o.d(t,{default:function(){return x}});var n=o(279),r=o.n(n),a=o(370),l=o.n(a),i=o(817),u=o.n(i);function c(e){try{return document.execCommand(e)}catch(t){return!1}}var s=function(e){var t=u()(e);return c("cut"),t},d=function(e,t){var o=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=e,o}(e);t.container.appendChild(o);var n=u()(o);return c("copy"),o.remove(),n},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},o="";return"string"==typeof e?o=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?o=d(e.value,t):(o=u()(e),c("copy")),o};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,o=void 0===t?"copy":t,n=e.container,r=e.target,a=e.text;if("copy"!==o&&"cut"!==o)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==f(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===o&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===o&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return a?p(a,{container:n}):r?"cut"===o?s(r):p(r,{container:n}):void 0};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n,r,a=v(e);if(t){var l=v(this).constructor;o=Reflect.construct(a,arguments,l)}else o=a.apply(this,arguments);return n=this,!(r=o)||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):r}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){var o="data-clipboard-".concat(e);if(t.hasAttribute(o))return t.getAttribute(o)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,o,n,r=g(a);function a(e,t){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=r.call(this)).resolveOptions(t),o.listenClick(e),o}return t=a,o=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=l()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,o=this.action(t)||"copy",n=m({action:o,container:this.container,target:this.target(t),text:this.text(t)});this.emit(n?"success":"error",{action:o,text:n,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return w("action",e)}},{key:"defaultTarget",value:function(e){var t=w("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return w("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],n=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return s(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return t.forEach((function(e){o=o&&!!document.queryCommandSupported(e)})),o}}],o&&b(t.prototype,o),n&&b(t,n),a}(r()),x=S},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,o){var n=o(828);function r(e,t,o,n,r){var l=a.apply(this,arguments);return e.addEventListener(o,l,r),{destroy:function(){e.removeEventListener(o,l,r)}}}function a(e,t,o,r){return function(o){o.delegateTarget=n(o.target,t),o.delegateTarget&&r.call(e,o)}}e.exports=function(e,t,o,n,a){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof o?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,o,n,a)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var o=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,o){var n=o(879),r=o(438);e.exports=function(e,t,o){if(!e&&!t&&!o)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(o))throw new TypeError("Third argument must be a Function");if(n.node(e))return function(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}(e,t,o);if(n.nodeList(e))return function(e,t,o){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,o)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,o)}))}}}(e,t,o);if(n.string(e))return function(e,t,o){return r(document.body,e,t,o)}(e,t,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=e.hasAttribute("readonly");o||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),o||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var n=this;function r(){n.off(e,r),t.apply(o,arguments)}return r._=t,this.on(e,r,o)},emit:function(e){for(var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,r=o.length;n<r;n++)o[n].fn.apply(o[n].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),n=o[e],r=[];if(n&&t)for(var a=0,l=n.length;a<l;a++)n[a].fn!==t&&n[a].fn._!==t&&r.push(n[a]);return r.length?o[e]=r:delete o[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}return o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o(686)}().default}()),{toClipboard:j}=(e=>{const t=void 0===(null==e?void 0:e.appendToBody)||e.appendToBody;return{toClipboard:(e,o)=>new Promise(((n,r)=>{const a=document.createElement("button"),l=new T(a,{text:()=>e,action:()=>"copy",container:void 0!==o?o:document.body});l.on("success",(e=>{l.destroy(),n(e)})),l.on("error",(e=>{l.destroy(),r(e)})),t&&document.body.appendChild(a),a.click(),t&&document.body.removeChild(a)}))}})(),k=e(),F={setup(){let e=l({isShowPorjectPop:!1,tableData:[],watchList:[{label:"PV",value:"pageChange",disabled:!0},{label:"JS错误",value:"jsError"},{label:"Vue错误",value:"vueError"},{label:"异步错误",value:"promise"},{label:"资源错误",value:"resource"},{label:"Fetch请求",value:"fetch"},{label:"Xhr请求",value:"xhr"},{label:"性能监控",value:"performance"},{label:"点击行为监控",value:"click"},{label:"白屏监控",value:"whiteScreen"},{label:"错误录屏上报",value:"recordScreen",disabled:!0}],projectTypeOptions:[{value:1,label:"web"}]});const r=i(),a=l({id:0,name:"",desc:"",monitorAppId:"",projectType:1,delay:30,encryption:0,watch:["pageChange"],maxQueues:1,status:1}),d=l({monitorAppId:[{required:!0,message:"请输入应用ID",trigger:"blur"}],name:[{required:!0,message:"请输入应用名称",trigger:"blur"}],desc:[{required:!0,message:"请输入应用说明",trigger:"blur"}]}),p=u((()=>{const{monitorAppId:e="",encryption:t,maxQueues:o,delay:n,watch:r=[]}=a;let l={};r.forEach((e=>{l[e]=!0,r.includes(e)||(l[e]=!1)})),l=JSON.stringify(l);let i='<script>;(function(w,d,s){n=()=>{const r=`http://127.0.0.1:9001`;new MonitorSdk({monitorAppId:`{monitorAppId}`,watch:{monitorWatch},report:{url:`${r}/api/upload`,trackUrl:`${r}/api/tracker/upload`,encryption:{monitorEncryption},maxQueues:{monitorMaxQueues},reportType:{monitorReportType},delay: {monitorDelay}}}) /* 多环境适配放开这里 } */ };(()=>{const e=d.createElement("script");e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,n())}:e.onload=function(){n()},e.src=s,d.head.append(e)})()})(window,document,"http://www.missxiaolin.com/monitorSdk.js");<\/script>';return i=i.replace(/\{monitorAppId\}/g,`${e}`),i=i.replace(/\{monitorWatch\}/g,`${l}`),i=i.replace(/\{monitorEncryption\}/g,`${t}`),i=i.replace(/\{monitorMaxQueues\}/g,`${o}`),i=i.replace(/\{monitorReportType\}/g,"1"),i=i.replace(/\{monitorDelay\}/g,""+1e3*n),i})),f=()=>{e.isShowPorjectPop=!1,a.id=0,a.name="",a.desc="",a.monitorAppId="",a.projectType=1,a.delay=30,a.encryption=0,a.watch=["pageChange"],a.maxQueues=1},{paginationData:m,handleCurrentChange:y,handleSizeChange:b}=n((()=>{h()})),h=async()=>{let t={page:m.currentPage,pageSize:m.pageSize},n=await o(t);n.success&&(m.total=n.model.count,e.tableData=n.model.list)};return c((()=>{h()})),{data:e,paginationData:m,handleCurrentChange:y,handleSizeChange:b,handleClose:f,ruleFormRef:r,ruleForm:a,rules:d,submitForm:async e=>{e&&await e.validate((async(e,o)=>{if(e){let e=a,o=await t(e);o.success?(s({message:"保存成功",type:"success"}),f(),h(),k.getValidProject()):s({message:o.errorMessage,type:"error"})}}))},resetForm:e=>{e&&e.resetFields()},probeCode:p,probeCodeCopy:async()=>{try{await j(p.value)}catch(e){console.error(e)}},showHandleDetail:t=>{a.id=t.id,a.name=t.name,a.desc=t.desc,a.monitorAppId=t.monitorAppId,a.projectType=Number(t.projectType),a.delay=t.delay,a.encryption=t.encryption,a.watch=JSON.parse(t.watch),a.maxQueues=t.maxQueues,e.isShowPorjectPop=!0}}}},A={class:"app-container"},V={class:"flex"},P={class:"table-wrapper"},I={class:"pager-wrapper mt20"},O={class:"flex"},D={class:"copy-code-area"},L=(e=>(C("data-v-aaecc7a1"),e=e(),_(),e))((()=>y("h4",null,"复制探针",-1))),R={class:"code"};const z=d(F,[["render",function(e,t,o,n,r,a){const l=p("el-button"),i=p("el-table-column"),u=p("el-table"),c=p("el-pagination"),s=p("el-card"),d=p("el-input"),C=p("el-form-item"),_=p("el-option"),E=p("el-select"),T=p("el-input-number"),j=p("el-radio"),k=p("el-radio-group"),F=p("el-checkbox"),z=p("el-checkbox-group"),M=p("el-form"),N=p("CopyDocument"),U=p("el-icon"),Q=p("el-dialog");return f(),m("div",A,[y("div",V,[b(l,{type:"primary",onClick:t[0]||(t[0]=e=>n.data.isShowPorjectPop=!0)},{default:h((()=>[g("新增应用")])),_:1})]),b(s,{class:"mt20"},{default:h((()=>[y("div",P,[b(u,{border:"",data:n.data.tableData},{default:h((()=>[b(i,{prop:"name",label:"应用名称",align:"center"}),b(i,{prop:"desc",label:"应用说明",align:"center"}),b(i,{prop:"monitorAppId",label:"项目Id",align:"monitorAppId"}),b(i,{prop:"delay",label:"上报间隔",align:"center"}),b(i,{label:"是否加密",align:"center"},{default:h((({row:e})=>[g(v(0==e.encryption?"不加密":"加密"),1)])),_:1}),b(i,{label:"是否开启",align:"center"},{default:h((({row:e})=>[g(v(0==e.status?"禁用":"开启"),1)])),_:1}),b(i,{prop:"updateTime",label:"修改时间",align:"center"}),b(i,{label:"操作",align:"center"},{default:h((({row:e})=>[b(l,{type:"text",onClick:t=>n.showHandleDetail(e)},{default:h((()=>[g(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),y("div",I,[b(c,{background:"",layout:n.paginationData.layout,"page-sizes":n.paginationData.pageSizes,total:n.paginationData.total,"page-size":n.paginationData.pageSize,currentPage:n.paginationData.currentPage,onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1}),b(Q,{modelValue:n.data.isShowPorjectPop,"onUpdate:modelValue":t[12]||(t[12]=e=>n.data.isShowPorjectPop=e),title:"应用",width:"60%","before-close":n.handleClose},{default:h((()=>[y("div",O,[b(M,{ref:"ruleFormRef",model:n.ruleForm,rules:n.rules,"label-width":"120px",size:"default","status-icon":"",class:"pop-form"},{default:h((()=>[b(C,{label:"应用ID",prop:"monitorAppId"},{default:h((()=>[b(d,{modelValue:n.ruleForm.monitorAppId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.ruleForm.monitorAppId=e),disabled:!!n.ruleForm.id},null,8,["modelValue","disabled"])])),_:1}),b(C,{label:"应用类型",prop:"projectType"},{default:h((()=>[b(E,{modelValue:n.ruleForm.projectType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.ruleForm.projectType=e)},{default:h((()=>[(f(!0),m(w,null,S(n.data.projectTypeOptions,(e=>(f(),x(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(C,{label:"应用名称",prop:"name"},{default:h((()=>[b(d,{modelValue:n.ruleForm.name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),b(C,{label:"应用说明",prop:"desc"},{default:h((()=>[b(d,{modelValue:n.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>n.ruleForm.desc=e)},null,8,["modelValue"])])),_:1}),b(C,{label:"上报条数",prop:"maxQueues"},{default:h((()=>[b(T,{modelValue:n.ruleForm.maxQueues,"onUpdate:modelValue":t[5]||(t[5]=e=>n.ruleForm.maxQueues=e),min:1,max:20},null,8,["modelValue"])])),_:1}),b(C,{label:"应用间隔",prop:"delay"},{default:h((()=>[b(d,{modelValue:n.ruleForm.delay,"onUpdate:modelValue":t[6]||(t[6]=e=>n.ruleForm.delay=e)},{append:h((()=>[g("ms")])),_:1},8,["modelValue"])])),_:1}),b(C,{label:"是否加密",prop:"encryption"},{default:h((()=>[b(k,{modelValue:n.ruleForm.encryption,"onUpdate:modelValue":t[7]||(t[7]=e=>n.ruleForm.encryption=e),disabled:!0},{default:h((()=>[b(j,{label:1},{default:h((()=>[g("加密")])),_:1}),b(j,{label:0},{default:h((()=>[g("不加密")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(C,{label:"是否使用",prop:"encryption"},{default:h((()=>[b(k,{modelValue:n.ruleForm.status,"onUpdate:modelValue":t[8]||(t[8]=e=>n.ruleForm.status=e)},{default:h((()=>[b(j,{label:1},{default:h((()=>[g("使用")])),_:1}),b(j,{label:0},{default:h((()=>[g("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(C,{label:"监听配置",prop:"watch"},{default:h((()=>[b(z,{modelValue:n.ruleForm.watch,"onUpdate:modelValue":t[9]||(t[9]=e=>n.ruleForm.watch=e)},{default:h((()=>[(f(!0),m(w,null,S(n.data.watchList,((e,t)=>(f(),x(F,{label:e.value,key:t,disabled:e.disabled||!1},{default:h((()=>[g(v(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(C,null,{default:h((()=>[b(l,{type:"primary",onClick:t[10]||(t[10]=e=>n.submitForm(n.ruleFormRef))},{default:h((()=>[g(v(n.ruleForm.id&&0!=n.ruleForm.id?"修改":"添加"),1)])),_:1}),b(l,{onClick:t[11]||(t[11]=e=>n.resetForm(n.ruleFormRef))},{default:h((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model","rules"]),y("div",D,[L,y("div",R,[b(U,{class:"copy-btn",size:"22",onClick:n.probeCodeCopy},{default:h((()=>[b(N)])),_:1},8,["onClick"]),g(" "+v(n.probeCode),1)])])])])),_:1},8,["modelValue","before-close"])])}],["__scopeId","data-v-aaecc7a1"]]);export{z as default};
