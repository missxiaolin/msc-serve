import{f as e}from"./index-e4b722a2.js";import{c as r,a as t}from"./service-85055b13.js";import{b as s}from"./index-d939e598.js";const i=e({id:"app-general",state:()=>({projectList:r("PROJECT_ALL")?JSON.parse(r("PROJECT_ALL")||"[]"):[],currentProjectId:r("PROJECT_ID")||"",refreshTimer:null,manualRefresh:!1}),getters:{getProjectList(){return this.projectList},getCurrentProjectId(){return this.currentProjectId},getManualRefresh(){return this.manualRefresh}},actions:{setCurrentProject(e){this.currentProjectId=e,t("PROJECT_ID",e)},setProjectList(e){var s;this.projectList=e,t("PROJECT_ALL",JSON.stringify(e));let i=null==(s=e[0])?void 0:s.monitorAppId;i&&!r("PROJECT_ID")&&(this.currentProjectId=i.monitorAppId,t("PROJECT_ID",i.monitorAppId))},async getValidProject(){let e=await s();e.success&&this.setProjectList(e.model)},setManualRefresh(){this.refreshTimer||(this.manualRefresh=!0,this.refreshTimer=setTimeout((()=>{this.manualRefresh=!1,this.refreshTimer=null,clearTimeout(this.refreshTimer)}),100))}}});export{i as u};
