var t=Object.defineProperty,a=Object.defineProperties,e=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,e,o)=>e in a?t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,s=(t,a)=>{for(var e in a||(a={}))l.call(a,e)&&i(t,e,a[e]);if(o)for(var e of o(a))n.call(a,e)&&i(t,e,a[e]);return t},r=(t,a,e)=>new Promise(((o,l)=>{var n=t=>{try{s(e.next(t))}catch(a){l(a)}},i=t=>{try{s(e.throw(t))}catch(a){l(a)}},s=t=>t.done?o(t.value):Promise.resolve(t.value).then(n,i);s((e=e.apply(t,a)).next())}));import{c}from"./index-30c47b72.js";import{r as d}from"./service-8ecc8995.js";import{p,M as u,a as y,b as h}from"./index-06a8a0b4.js";import{_ as m,r as f,o as D,a as v,d as b,j as g,v as j,x,b as C,k as _,z as K,L as T,M as w,c as P,w as O,F as E,f as M,Q as $}from"./index-b021bdf4.js";import{E as k,l as I}from"./index-94443ec4.js";const N={props:{title:{type:String,default:()=>""},optionData:{type:Object,default:()=>({})},objKey:{type:String,default:()=>""}},setup:()=>({riseTrendCompout:(t,a,e)=>{let o=0;return o=e?(t-a)/t:(a-t)/a,`${(100*(o||0)).toFixed(0)} %`}})},U={class:"footer-item"},z=(t=>(T("data-v-7212cecc"),t=t(),w(),t))((()=>C("span",null,"较昨日",-1))),V={class:"green"};const F={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0,formatter:t=>{let{name:a,value:e,seriesName:o,color:l}=t[0],n=a;return a.includes(".com")&&(a=a.split(".com")[1],a=a.split("?"),n=`${a[0]}</br>${a[1]?a[1].slice(0,20)+"...":""}`),`${n}</br><span style="display:flex; align-items: center;">\n\t\t\t\t<i style="display:block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:${l}"></i>${o}:\n\t\t\t\t <i style="padding-left: 30px;">${e}</i>\n\t\t\t</span>`}},xAxis:{type:"value",splitNumber:5,position:"top"},yAxis:{type:"category",data:[],axisLabel:{color:"#95979e",interval:0,formatter:t=>`${t.slice(0,20)}${t.length>20?"...":""}`}},series:[{name:"数量",type:"bar",label:{show:!0,position:"right",valueAnimation:!0},emphasis:{focus:"series"},data:[]}]};const H={components:{dataCardItem:m(N,[["render",function(t,a,e,o,l,n){const i=f("el-statistic"),s=f("CaretTop"),r=f("CaretBottom"),c=f("el-icon");return D(),v("div",null,[b(i,{value:e.optionData.analyseData.todayData[e.objKey]},{title:g((()=>[j(x(e.title),1)])),_:1},8,["value"]),C("div",U,[z,C("span",V,[j(x(o.riseTrendCompout(e.optionData.analyseData.todayData[e.objKey],e.optionData.analyseData.yesterdayData[e.objKey],e.optionData.analyseData.todayData[e.objKey]>e.optionData.analyseData.yesterdayData[e.objKey]))+" ",1),b(c,{size:"14"},{default:g((()=>[e.optionData.analyseData.todayData[e.objKey]>e.optionData.analyseData.yesterdayData[e.objKey]?(D(),_(s,{key:0})):K("",!0),e.optionData.analyseData.todayData[e.objKey]<e.optionData.analyseData.yesterdayData[e.objKey]?(D(),_(r,{key:1})):K("",!0)])),_:1})])])])}],["__scopeId","data-v-7212cecc"]]),pageHoursEchart:p,colItem:m({props:{title:{type:String,default:""},tip:{type:String,default:""},chart:{type:Object,default:{}},optionData:{type:Object,default:{}},chartKey:{type:String,default:""}},components:{Echarts:k},setup(t){const{chart:a}=t;a.topEchartModel;const e=P((()=>(t,e=a.topEchartModel)=>{const o=I.cloneDeep(F),l=e[t],n=(null==l?void 0:l.axisData)||[],i=(null==l?void 0:l.seriesData)||[],s=i.length,r=s-a.showNum;return o.yAxis.data=n.slice(r,s),o.series[0].data=i.slice(r,s),o}));return O(a,(()=>{})),{chartData:e}}},[["render",function(t,a,e,o,l,n){const i=f("WarningFilled"),s=f("el-icon"),r=f("el-tooltip"),c=f("Echarts");return D(),v(E,null,[C("dl",null,[C("dt",null,[j(x(e.title)+" "+x(e.chart.showNum)+" ",1),b(r,{effect:"dark",content:e.tip,placement:"right"},{default:g((()=>[b(s,{size:"20"},{default:g((()=>[b(i)])),_:1})])),_:1},8,["content"])]),C("dd",null,x(e.optionData.analyseTime),1)]),b(c,{options:o.chartData(e.chartKey,e.chart.topEchartModel),size:e.chart.echartHeight},null,8,["options","size"])],64)}],["__scopeId","data-v-6f03163c"]]),MapEcharts:u},setup(){let t=M({analyseTime:"",analyseData:{todayData:{pvCount:0,uvCount:0,newUvCount:0,ipCounct:0,jumpCount:0,visitFrequency:0},yesterdayData:{pvCount:0,uvCount:0,newUvCount:0,ipCounct:0,jumpCount:0,visitFrequency:0}}});const o=()=>r(this,null,(function*(){let a={analyseTime:t.analyseTime},e=yield function(t){return d({url:"/adm/analyse/core",method:"post",data:t})}(a);if(!e.success)return!1;t.analyseData=e.model})),l=()=>{o(),u(),m()},n=P((()=>({startTime:`${t.analyseTime} 00:00:00`,endTime:`${t.analyseTime} 23:59:59`}))),i=P((()=>s({},n.value)));let p=M({topEchartModel:{},ipcregion:[],showNum:10,echartHeight:200});const u=()=>r(this,null,(function*(){const t=(o=s({},n.value),a(o,e({limit:30})));var o;const l=yield y(t);if(!l.success)return!1;p.topEchartModel=l.model})),m=()=>r(this,null,(function*(){const t=s({},n.value);let a=yield h(t);if(!a.success)return!1;p.ipcregion=a.model}));return $((()=>{t.analyseTime=c(),l()})),{data:t,disabledDate:t=>t.getTime()>Date.now(),initQuery:l,hourPvUvParam:i,chart:p,handleTopNumChange:t=>{p.echartHeight={10:300,20:400,30:500}[t]}}}},S=t=>(T("data-v-75cb16e1"),t=t(),w(),t),A={class:"app-container center"},Y={class:"home-title flex"},q=S((()=>C("dt",{class:"flex-1"},"核心数据",-1))),Q={class:"top-title"},L=S((()=>C("span",{style:{color:"var(--e-color-success-light-3)"}},"(H-1数据)",-1))),W=S((()=>C("div",{class:"top-title"},"实时数据",-1))),B={class:"home-title flex"},G=S((()=>C("dt",null,"综合数据",-1))),J={class:"flex-1"},R={class:"synthetic-data flex"},X={class:"synthetic-data flex"},Z={class:"e-col"},tt={class:"e-col"},at={class:"e-col"},et={class:"e-col"},ot={class:"e-col"},lt={class:"e-col"},nt={class:"top-title"};const it=m(H,[["render",function(t,a,e,o,l,n){const i=f("el-date-picker"),s=f("WarningFilled"),r=f("el-icon"),c=f("el-tooltip"),d=f("dataCardItem"),p=f("el-col"),u=f("el-row"),y=f("el-card"),h=f("pageHoursEchart"),m=f("el-radio-button"),x=f("el-radio-group"),_=f("colItem"),K=f("MapEcharts");return D(),v("div",A,[C("dl",Y,[q,C("dd",null,[b(i,{modelValue:o.data.analyseTime,"onUpdate:modelValue":a[0]||(a[0]=t=>o.data.analyseTime=t),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择查询日期",clearable:!1,"disabled-date":o.disabledDate,onChange:o.initQuery},null,8,["modelValue","disabled-date","onChange"])])]),b(y,{class:"box-card"},{default:g((()=>[C("div",Q,[j(" 流量数据 "),L,b(c,{effect:"dark",content:"定时数据，每小时59分钟59秒统计",placement:"right"},{default:g((()=>[b(r,{size:"20"},{default:g((()=>[b(s)])),_:1})])),_:1})]),b(u,{gutter:24},{default:g((()=>[b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"浏览量(PV)",objKey:"pvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"访客数(UV)",objKey:"uvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"新访客",objKey:"newUvCount"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"IP数",objKey:"ipCounct"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"频次(人均)",objKey:"visitFrequency"},null,8,["optionData"])])),_:1}),b(p,{span:4},{default:g((()=>[b(d,{optionData:o.data,title:"跳出率",objKey:"jumpCount"},null,8,["optionData"])])),_:1})])),_:1})])),_:1}),b(y,{class:"box-card mt20"},{default:g((()=>[W,b(h,{params:o.hourPvUvParam},null,8,["params"])])),_:1}),C("dl",B,[G,C("dd",J,[b(x,{modelValue:o.chart.showNum,"onUpdate:modelValue":a[1]||(a[1]=t=>o.chart.showNum=t),onChange:o.handleTopNumChange,size:"small"},{default:g((()=>[b(m,{label:10},{default:g((()=>[j("10")])),_:1}),b(m,{label:20},{default:g((()=>[j("20")])),_:1}),b(m,{label:30},{default:g((()=>[j("30")])),_:1})])),_:1},8,["modelValue","onChange"])])]),C("section",R,[C("div",X,[C("div",Z,[b(_,{chart:o.chart,optionData:o.data,chartKey:"simpleUrl",title:"页面访问量TOP",tip:"统计网站的访问数量"},null,8,["chart","optionData"])]),C("div",tt,[b(_,{chart:o.chart,optionData:o.data,chartKey:"cregion",title:"城市名称访问用户量TOP",tip:"在不同城市访问网站的用户量分布情况。ps: 城市是根据ip地址查询出来的，并不是每个ip都能查询出来，查询出来的结果也未必准确，只作为趋势参考"},null,8,["chart","optionData"])]),C("div",at,[b(_,{chart:o.chart,optionData:o.data,chartKey:"device",title:"浏览设备访问用户量TOP",tip:"数值代表使用的浏览设备的数量"},null,8,["chart","optionData"])]),C("div",et,[b(_,{chart:o.chart,optionData:o.data,chartKey:"os",title:"系统版本访问用户量TOP",tip:"不同设备星号的用户量分布情况"},null,8,["chart","optionData"])]),C("div",ot,[b(_,{chart:o.chart,optionData:o.data,chartKey:"browser",title:"浏览器版本访问用户量TOP",tip:"数值代表使用的浏览器版本的数量"},null,8,["chart","optionData"])]),C("div",lt,[b(_,{chart:o.chart,optionData:o.data,chartKey:"screen",title:"设备分辨率访问用户量TOP",tip:"数值代表设备的物理分辨率"},null,8,["chart","optionData"])])])]),b(y,{class:"box-card mt20"},{default:g((()=>[C("div",nt,[j(" 地理分布 "),b(c,{effect:"dark",content:"城市是根据ip地址查询出来的，并不是每个ip都能查询出结果，查询出来的结果也未必准确，只作为趋势参考。",placement:"right"},{default:g((()=>[b(r,{size:"20"},{default:g((()=>[b(s)])),_:1})])),_:1})]),b(K,{ipCregion:o.chart.ipcregion},null,8,["ipCregion"])])),_:1})])}],["__scopeId","data-v-75cb16e1"]]);export{it as default};
