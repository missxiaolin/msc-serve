import{f as t}from"./index-9489d45e.js";import{r as e,c as r,a as s}from"./service-ad7ba581.js";function i(t){return e({url:"/adm/project/save",method:"post",data:t})}function a(t){return e({url:"/adm/project/list",method:"post",data:t})}const o=t({id:"app-general",state:()=>({projectList:r("PROJECT_ALL")?JSON.parse(r("PROJECT_ALL")||"[]"):[],currentProjectId:r("PROJECT_ID")||"",refreshTimer:null,manualRefresh:!1}),getters:{getProjectList(){return this.projectList},getCurrentProjectId(){return this.currentProjectId},getManualRefresh(){return this.manualRefresh}},actions:{setCurrentProject(t){this.currentProjectId=t,s("PROJECT_ID",t)},setProjectList(t){var e;this.projectList=t,s("PROJECT_ALL",JSON.stringify(t));let i=null==(e=t[0])?void 0:e.monitorAppId;i&&!r("PROJECT_ID")&&(this.currentProjectId=i.monitorAppId,s("PROJECT_ID",i.monitorAppId))},async getValidProject(){let t=await e({url:"/adm/project/all/status/list",method:"post"});t.success&&this.setProjectList(t.model)},setManualRefresh(){this.refreshTimer||(this.manualRefresh=!0,this.refreshTimer=setTimeout((()=>{this.manualRefresh=!1,this.refreshTimer=null,clearTimeout(this.refreshTimer)}),100))}}});export{a,i as p,o as u};
