import{E as t}from"./index-ecc82270.js";import{c as e,_ as o,r as a,o as s,a as i,b as n,k as r,l,F as p,y as d}from"./index-6c853ef9.js";import{r as c}from"./service-708868eb.js";const u={class:"flex flex-row justify-between",style:{width:"100%"}};const h=o({components:{Echarts:t},props:{options:{type:Object,required:!0}},name:"perfEchart",setup:t=>({navigationEchart:e((()=>{var e;const o=(null==(e=t.options)?void 0:e.nt)||{},a=["pageLoad","domReady","resourceLoad","domParse","contentDownload","ttfb","ssl","initialConnection","dnsLookup"],s=[],i=[];a.forEach(((t,e)=>{const n=(o[t]||0).toFixed(2);i.push(`${n}ms`);const r={name:t,type:"bar",stack:"Total",label:{show:!0,position:"right"},data:[]};for(let o=0,s=a.length;o<s;o++)e==o?r.data.push(n):r.data.push("-");s.push(r)}));const{pageLoad:n=0,domReady:r=0,resourceLoad:l=0,domParse:p=0,contentDownload:d=0,ttfb:c=0,ssl:u=0,initialConnection:h=0,dnsLookup:x=0}=o,f=[+n.toFixed(2),+r.toFixed(2),+l.toFixed(2),+p.toFixed(2),+d.toFixed(2),+c.toFixed(2),+u.toFixed(2),+h.toFixed(2),+x.toFixed(2)],y=[];for(let t=0;t<f.length;t++){const e=JSON.parse(JSON.stringify(f)).reverse().slice(0,t+1).reduce(((t,e)=>t+e));y.unshift(+e.toFixed(2))}const{placeholderData:m}=function(t){const e=[0],o=[t[0]],a=["-"];return t.forEach(((s,i)=>{if(i!==t.length-1){const n=t[i+1]-s;n>0?(e.push(s),o.push(n),a.push("-")):(e.push(s+n),o.push(0),a.push(Math.abs(n)))}})),{placeholderData:e,data1:o,data2:a}}(y.reverse());return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(let e=1,o=t.length;e<o;e++){let{name:o,value:a,seriesName:s,color:i}=t[e];if("-"!==a)return`${o}</br><span style="display:flex; align-items: center;">\n\t\t\t\t\t<i style="display:block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:${i}"></i>${s}:\n\t\t\t\t\t<i style="padding-left: 30px;">${a}</i>\n\t\t\t\t</span>`}}},xAxis:{type:"value",show:!1,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}}},yAxis:[{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:["页面完全加载","DOM完成加载","资源加载耗时","DOM解析耗时","内容传输耗时","请求响应耗时","SSL安全连接耗时","TCP连接耗时","DNS查询耗时"]},{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:i}],seriesColorReset:!1,series:[{name:"Placeholder",type:"bar",stack:"Total",silent:!0,itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:m.reverse()},...s]}}))})},[["render",function(t,e,o,c,h,x){const f=a("el-statistic"),y=a("Echarts");return s(),i(p,null,[n("div",u,[r(f,{title:"白屏时间",value:o.options.fp.value||0},{suffix:l((()=>[d("ms")])),_:1},8,["value"]),r(f,{title:"DOM完成加载",value:o.options.nt&&o.options.nt.domReady?o.options.nt.domReady:0},{suffix:l((()=>[d("ms")])),_:1},8,["value"]),r(f,{title:"页面完全加载",value:o.options.nt&&o.options.nt.pageLoad?o.options.nt.pageLoad:0},{suffix:l((()=>[d("ms")])),_:1},8,["value"])]),r(y,{options:c.navigationEchart},null,8,["options"])],64)}]]),x={components:{Echarts:t},props:{options:{type:Object,required:!0}},name:"wxPerfEchart",setup:t=>({navigationEchart:e((()=>{var e;const o=(null==(e=t.options)?void 0:e.nt)||{},a=["firstRenderduration","evaluateScriptduration","routeduration","appLaunchduration","downloadPackageduration"],s=[],i=[];a.forEach(((t,e)=>{const n=(o[t]||0).toFixed(2);i.push(`${n}ms`);const r={name:t,type:"bar",stack:"Total",label:{show:!0,position:"right"},data:[]};for(let o=0,s=a.length;o<s;o++)e==o?r.data.push(n):r.data.push("-");s.push(r)}));const{firstRenderduration:n=0,evaluateScriptduration:r=0,routeduration:l=0,appLaunchduration:p=0,downloadPackageduration:d=0}=o,c=[+n.toFixed(2),+r.toFixed(2),+l.toFixed(2),+p.toFixed(2),+d.toFixed(2)],u=[];for(let t=0;t<c.length;t++){const e=JSON.parse(JSON.stringify(c)).reverse().slice(0,t+1).reduce(((t,e)=>t+e));u.unshift(+e.toFixed(2))}const{placeholderData:h}=function(t){const e=[0],o=[t[0]],a=["-"];return t.forEach(((s,i)=>{if(i!==t.length-1){const n=t[i+1]-s;n>0?(e.push(s),o.push(n),a.push("-")):(e.push(s+n),o.push(0),a.push(Math.abs(n)))}})),{placeholderData:e,data1:o,data2:a}}(u.reverse());return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(let e=1,o=t.length;e<o;e++){let{name:o,value:a,seriesName:s,color:i}=t[e];if("-"!==a)return`${o}</br><span style="display:flex; align-items: center;">\n\t\t\t\t\t<i style="display:block;margin-right:5px;border-radius:50%;width:10px;height:10px;left:5px;background-color:${i}"></i>${s}:\n\t\t\t\t\t<i style="padding-left: 30px;">${a}</i>\n\t\t\t\t</span>`}}},xAxis:{type:"value",show:!1,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}}},yAxis:[{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:["页面渲染","JS注入","路由","小程序启动","代码包下载"]},{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dotted"}},type:"category",data:i}],seriesColorReset:!1,series:[{name:"Placeholder",type:"bar",stack:"Total",silent:!0,itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:h.reverse()},...s]}}))})},f=n("div",{class:"flex flex-row justify-between",style:{width:"100%"}},null,-1);const y=o(x,[["render",function(t,e,o,n,l,d){const c=a("Echarts");return s(),i(p,null,[f,r(c,{options:n.navigationEchart},null,8,["options"])],64)}]]);function m(t){return c({url:"/adm/performance/list",method:"post",data:t})}function g(t){return c({url:"/adm/performance/echart/by/url",method:"post",data:t})}export{h as P,y as W,g as a,m as p};
//# sourceMappingURL=index-85234cb2.js.map
